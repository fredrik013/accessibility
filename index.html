<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tillgänglighetsguiden - Fredrik Andersson</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <a class="skip-link" href="#main-content">Hoppa till huvudinnehåll</a>

<header>
        <h1>Tillgänglighetsguiden</h1>
        <p><strong>Skapad av: Fredrik Andersson</strong></p>
        
        <nav aria-label="Innehållsförteckning">
    <h2 class="sr-only">Innehållsförteckning</h2>
    <ol>
        <li style="list-style-type: none;"><a href="#about">Om guiden</a></li>
        <li value="1"><a href="#aria-labels">Namnge det osynliga (Aria-labels)</a></li>
        
        <li><a href="#links-vs-buttons">Länkar eller Knappar?</a></li>
        <li><a href="#search-example">Sökfunktionen (Relationer)</a></li>
        <li><a href="#naming-objects">Namngivning av objekt (Bilder & Ikoner)</a></li>
        <li><a href="#tables">Optimera tabeller (Struktur & Relationer)</a></li>
        <li><a href="#forms-chapter">Tillgängliga Formulär</a></li>
        <li><a href="#check-radio-chapter">Checkboxar, Radioknappar och Brytare</a></li>
        <li><a href="#menus-chapter">Menyer och Dropdowns</a></li>
        <li><a href="#keyboard-chapter">Tangentbordsnavigering</a></li>
        <li><a href="#react-chapter">HTML vs React (Ramverk)</a></li>
    </ol>
</nav>
    </header>

    <main id="main-content" tabindex="-1">
        
        <section id="about">
            <h2>Om guiden</h2>
            <p>
                Här delar jag med mig av mina kunskaper och erfarenheter av att arbeta med tillgänglighet för skärmläsare. 
                Mitt perspektiv är lite speciellt: <strong>jag är själv blind och använder dessa hjälpmedel varje dag.</strong>
            </p>
            <p>
                Jag påbörjade min resa inom systemutveckling i april 2024. När jag lärde mig grunderna i HTML 
                insåg jag snabbt hur stor skillnad små medel kan göra. Det är ofta förvånansvärt enkelt att göra 
                en webbsida tillgänglig – om man bara vet <em>hur</em> man ska göra och <em>varför</em>.
            </p>
            <p>
                Eftersom jag själv är i början av min karriär är guiden under ständig utveckling. Den gör inte anspråk 
                på att vara ett fullständigt facit, men min förhoppning är att den ska ge dig en stabil grund att stå på.
            </p>

            <div class="explanation">
                <h3>Hur jag "läser" din kod</h3>
                <p>För att förstå exemplen i den här guiden är det bra att veta hur min skärmläsare tolkar din HTML:</p>
                <ul>
                    <li><strong>Kartan:</strong> Jag hoppar mellan landmärken (som <code>main</code>, <code>nav</code> och <code>search</code>).</li>
                    <li><strong>Verktygen:</strong> Jag navigerar från knapp till knapp. Utan rätt namn vet jag inte vad de gör.</li>
                    <li><strong>Berättelsen:</strong> Jag läser rubriker och brödtext för att ta till mig informationen.</li>
                </ul>
            </div>
        </section>

        <section id="aria-labels">
            <h2>1. Namnge det osynliga (Aria-labels)</h2>
            <p>
                Många moderna webbsidor använder ikoner istället för text. För en seende är ett hjärta en sökknapp, 
                men för min skärmläsare är det bara "Knapp". Med <code>aria-label</code> tänder vi ljuset.
            </p>

            <div class="explanation">
                <h3>Lösningen: Ge elementet ett namn</h3>
                <p>
                    Genom att använda <code>aria-label</code> kan du ge knappen ett namn som bara jag hör, 
                    utan att det ändrar sidans utseende.
                </p>
            </div>

            <div class="code-block">
                <p><strong>❌ Dåligt (Jag hör bara "Knapp"):</strong></p>
                <pre><code>&lt;button&gt; ❤️ &lt;/button&gt;</code></pre>

                <p><strong>✅ Bra (Jag hör "Lägg till i favoriter, knapp"):</strong></p>
                <pre><code>&lt;button aria-label="Lägg till i favoriter"&gt; ❤️ &lt;/button&gt;</code></pre>
            </div>

            <div class="tip-box">
                <strong>Fredriks tips:</strong> Använd alltid riktiga HTML-taggar som <code>&lt;button&gt;</code>. 
                Om du bygger en knapp av en <code>&lt;div&gt;</code> fattar inte min skärmläsare att den går att klicka på!
            </div>
        </section>

       <section id="links-vs-buttons">
            <h2>2. Länkar eller Knappar? (Välj rätt verktyg)</h2>
            <p>
                Det här är ett av de vanligaste felen på webben. Man designar en länk så att den ser ut som en knapp, 
                eller använder en knapp för att navigera. För mig är skillnaden i funktion helt avgörande.
            </p>

            <div class="explanation">
                <h3>Varför det spelar roll för mig:</h3>
                <ul>
                    <li><strong>Länkar (<code>&lt;a&gt;</code>):</strong> När jag hör "Länk" förväntar jag mig att bli förflyttad till en ny sida eller sektion.</li>
                    <li><strong>Knappar (<code>&lt;button&gt;</code>):</strong> När jag hör "Knapp" förväntar jag mig att något ska <em>hända</em> (t.ex. öppna en meny eller skicka ett formulär).</li>
                </ul>
            </div>

            <div class="code-block">
                <p><strong>✅ Rätt användning:</strong></p>
                <pre><code>&lt;!-- För navigering --&gt;
&lt;a href="/kontakt"&gt;Kontakta oss&lt;/a&gt;

&lt;!-- För en handling --&gt;
&lt;button type="button" onclick="save()"&gt;Spara ändringar&lt;/button&gt;</code></pre>
            </div>
        </section>

<section id="search-example">
            <h2>3. Sökfunktionen (Relationer i koden)</h2>
            <p>
                När vi bygger en sökfunktion räcker det inte med att elementen finns där. Vi måste skapa en logisk 
                koppling mellan dem så att skärmläsaren förstår vad som hör ihop.
            </p>
            
            <div class="code-block">
                <pre><code>&lt;!-- 1. Behållaren som markerar sök-området --&gt;
&lt;div role="search" aria-label="Sök upplevelser"&gt;

  &lt;!-- 2. Inputfältet med en pekpinne (aria-describedby) --&gt;
  &lt;input 
    type="text" 
    role="searchbox" 
    aria-describedby="search-instruction" 
    placeholder="Sök..."
  /&gt;

  &lt;!-- 3. Instruktionen som pekpinnen pekar på --&gt;
  &lt;div id="search-instruction" class="sr-only"&gt;
    Sök genom att skriva namn på upplevelser, resultatet uppdateras automatiskt.
  &lt;/div&gt;

&lt;/div&gt;</code></pre>
            </div>

            <div class="explanation">
                <h3>Vad händer "under huven"?</h3>
                <ul>
                    <li><strong>role="search":</strong> Detta skapar ett <em>landmärke</em>. För mig innebär det att jag kan trycka på en snabbknapp (ofta 'D' eller via en lista) för att hoppa direkt till söksektionen utan att behöva tabba förbi hela menyn.</li>
                    <li><strong>role="searchbox":</strong> Berättar för mig att detta inte bara är vilket textfält som helst, utan ett fält specifikt byggt för sökningar.</li>
                    <li><strong>ID-kopplingen (Den viktigaste biten):</strong> 
                        Attributet <code>aria-describedby</code> fungerar som en osynlig länk. Den säger till skärmläsaren: 
                        <em>"När användaren står i det här fältet, läs även upp texten som finns i elementet med ID:t <strong>search-instruction</strong>"</em>. 
                        Det gör att jag får instruktionen direkt i örat när jag ska börja skriva.
                    </li>
                </ul>
            </div>

            <div class="tip-box">
                <strong>Varför inte bara använda placeholder?</strong> 
                En <code>placeholder</code> försvinner ofta så fort man börjar skriva, och alla skärmläsare läser inte upp den på ett bra sätt. 
                Genom att använda en dold text med ett <code>id</code> säkerställer vi att informationen alltid finns tillgänglig för mig.
            </div>
        </section>

        <section id="naming-objects">
            <h2>4. Namngivning av objekt (Bilder & Ikoner)</h2>
            <p>
                Hur beskriver man en bild för någon som inte ser den? Det handlar om att välja rätt verktyg 
                beroende på om bilden är viktig för sammanhanget eller bara är där för att vara snygg.
            </p>

            <div class="explanation">
                <h3>Bilder (<code>&lt;img&gt;</code>) och Alt-text</h3>
                <p>
                    För vanliga bilder använder vi <code>alt</code>-attributet. Men här är den stora hemligheten: 
                    <strong>Ibland ska alt-texten vara tom.</strong>
                </p>
                <ul>
                    <li><strong>Informativ bild:</strong> Beskriv vad bilden föreställer (t.ex. <code>alt="En röd ryggsäck för vandring"</code>).</li>
                    <li><strong>Dekorativ bild:</strong> Om bilden bara är pynt, använd <code>alt=""</code>. Då hoppar min skärmläsare över den helt, vilket sparar mig tid.</li>
                </ul>
            </div>

            

            <div class="code-block">
                <p><strong>✅ Exempel på SVG-ikon som knapp:</strong></p>
                <p>Eftersom ikoner (ofta SVG) inte har en alt-tagg, använder vi <code>aria-label</code> på själva knappen.</p>
                <pre><code>&lt;button aria-label="Stäng fönster"&gt;
  &lt;svg aria-hidden="true"&gt;...&lt;/svg&gt;
&lt;/button&gt;</code></pre>
            </div>

            <div class="explanation">
                <h3>Varför står det <code>aria-hidden="true"</code> på ikonen?</h3>
                <p>
                    Det här är ett proffstricks! Genom att sätta <code>aria-hidden="true"</code> på själva SVG-koden 
                    säger vi till skärmläsaren: "Ignorera den här koden, jag har redan förklarat vad knappen gör 
                    via min label". Det förhindrar att skärmläsaren försöker läsa upp konstig kod eller "grafik".
                </p>
            </div>

            <div class="tip-box">
                <strong>Fredriks gyllene regel:</strong> Om en bild eller ikon inte tillför information som jag 
                behöver för att förstå sidan – gör den osynlig för mig. Mindre brus gör sajten mer lättanvänd!
            </div>
        </section>

<section id="tables">
            <h2>5. Optimera tabeller för skärmläsare</h2>
            <p>
                Tabeller är kraftfulla för att visa data, men utan rätt kod blir de en förvirrande labyrint för mig. 
                Hemligheten ligger i att koppla samman varje cell med sin rubrik.
            </p>

            <table>
                <caption>Viktiga element för tillgängliga tabeller</caption>
                <thead>
                    <tr>
                        <th scope="col">Element</th>
                        <th scope="col">Syfte</th>
                        <th scope="col">Min upplevelse</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>&lt;caption&gt;</code></td>
                        <td>Tabellens titel</td>
                        <td>Jag får veta vad tabellen handlar om direkt när jag landar på den.</td>
                    </tr>
                    <tr>
                        <td><code>&lt;th scope="col"&gt;</code></td>
                        <td>Kolumnrubrik</td>
                        <td>Skärmläsaren läser upp rubriken varje gång jag byter kolumn.</td>
                    </tr>
                    <tr>
                        <td><code>&lt;th scope="row"&gt;</code></td>
                        <td>Radrubrik</td>
                        <td>Hjälper mig förstå vilken rad jag är på om tabellen är väldigt bred.</td>
                    </tr>
                </tbody>
            </table>

            <div class="explanation">
                <h3>Varför "Scope" är din bästa vän</h3>
                <p>
                    Genom att använda <code>scope="col"</code> (för kolumner) eller <code>scope="row"</code> (för rader) 
                    skapar du en osynlig bro mellan rubriken och datan. När jag navigerar i tabellen 
                    läser skärmläsaren inte bara upp "15", utan den säger "Pris: 15". Det ger sammanhang!
                </p>
            </div>

            <div class="tip-box">
                <strong>Fredriks tips:</strong> Använd aldrig tabeller för att bygga layout (design). 
                Tabeller ska bara användas för att visa data. Om du vill placera saker bredvid varandra, 
                använd CSS Flexbox eller Grid istället – det blir mycket lättare för mig att navigera då.
            </div>
        </section>

<section id="forms-chapter">
    <h2>6. Tillgängliga Formulär</h2>
    
    <p class="explanation">
        Ett tillgängligt formulär handlar om tydliga relationer. En seende person ser kopplingen mellan en etikett och ett fält, men för en skärmläsare måste vi bygga en teknisk bro.
    </p>

    <h3>Kopplingen: Label och ID</h3>
    <p>
        För att jag som använder skärmläsare ska veta vad jag ska skriva i ett fält, måste fältet ha ett unikt <code>id</code> som matchas av en <code>label</code> med ett <code>for</code>-attribut. 
    </p>

    <div class="example-box">
        <label for="first-name">Förnamn:</label>
        <input type="text" id="first-name" name="firstname" autocomplete="given-name">
    </div>

    <h3>Gruppering med Fieldset och Legend</h3>
    <p>
        Ibland räcker det inte med en etikett. Om du har flera val (som radioknappar), behöver jag veta <em>sammanhanget</em>. Här använder vi <code>&lt;fieldset&gt;</code> för att gruppera och <code>&lt;legend&gt;</code> som gruppens rubrik.
    </p>

    <div class="example-box">
        <fieldset>
            <legend>Hur vill du bli kontaktad?</legend>
            
            <input type="radio" id="contact-email" name="contact" value="email">
            <label for="contact-email">Via e-post</label><br>
            
            <input type="radio" id="contact-phone" name="contact" value="phone">
            <label for="contact-phone">Via telefon</label>
        </fieldset>
    </div>

    <div class="tip-box">
        <p>
            <strong>Tips:</strong> Om du behöver lägga till extra instruktioner, kom ihåg att använda <code>aria-describedby</code>. Du kan repetera hur det fungerar i kapitlet om 
            <a href="#search-example">Sökfunktionen och relationer</a>.
        </p>
    </div>

<h3>Varför Fieldset och inte bara en rubrik?</h3>
<p>
    Många gör felet att bara använda en vanlig <code>&lt;h3&gt;</code> ovanför sina fält. Problemet är att jag som använder skärmläsare tappar bort rubriken så fort jag börjar tabba mellan fälten. 
</p>
<p class="explanation">
    <strong>Skillnaden mot role="group":</strong> Medan <code>role="group"</code> kan användas för att gruppera vad som helst på en sida, är <code>&lt;fieldset&gt;</code> speciellt byggt för formulär. Det har ett inbyggt samspel med skärmläsaren som gör att "legend-texten" följer med mig in i varje fält.
</p>

<div class="tip-box">
    <p>
        <strong>Kom ihåg:</strong> Använd alltid <code>&lt;legend&gt;</code> som det första elementet inuti en <code>&lt;fieldset&gt;</code>. Det är den texten som blir min karta när jag navigerar i formuläret.
    </p>
</div>

<hr>
    <h3>Felhantering i formulär</h3>
    <p>
        När ett fält är felaktigt ifyllt räcker det inte med att göra ramen röd. En skärmläsare behöver få veta det tekniskt för att kunna förmedla det till användaren.
    </p>

    <div class="example-box">
        <label for="email-field">E-postadress (obligatoriskt):</label>
        <input 
            type="email" 
            id="email-field" 
            aria-invalid="true" 
            aria-describedby="email-error"
            value="felaktig-adress.se"
        >
        <p id="email-error" style="color: #d32f2f; font-weight: bold;">
            <strong>Fel:</strong> E-postadressen måste innehålla ett @-tecken.
        </p>
    </div>

    <p class="explanation">
        <strong>Varför detta fungerar:</strong><br>
        1. <code>aria-invalid="true"</code> talar om för mig att "något är fel här".<br>
        2. <code>aria-describedby="email-error"</code> gör att skärmläsaren läser upp själva felmeddelandet direkt efter etiketten när jag tabbar till fältet.
    </p>

    <div class="tip-box">
        <p>
            <strong>Proffstips:</strong> Om felmeddelandet dyker upp dynamiskt (utan att sidan laddas om), kan du använda <code>role="alert"</code> på felmeddelandet för att skärmläsaren ska ropa ut felet direkt när det uppstår.
        </p>
    </div>
</section>

<section id="check-radio-chapter">
    <h2>7. Checkboxar, Radioknappar och Brytare</h2>
    
    <p class="explanation">
        Dessa kontroller används för att göra val. För oss som använder skärmläsare är det viktigt att veta om vi väljer <em>ett</em> alternativ eller om vi kan kryssa i <em>flera</em>.
    </p>

    <h3>Radioknappar (Välj ett)</h3>
    <div class="example-box">
        <fieldset>
            <legend>Vilken dryck föredrar du till lunch?</legend>
            <input type="radio" id="water" name="drink" value="water">
            <label for="water">Källvatten</label><br>
            
            <input type="radio" id="juice" name="drink" value="juice">
            <label for="juice">Äppeljuice</label><br>

            <input type="radio" id="soda" name="drink" value="soda">
            <label for="soda">Alkoholfri cider</label>
        </fieldset>
    </div>

    <h3>Checkboxar (Välj flera)</h3>
    <div class="example-box">
        <fieldset>
            <legend>Vilka tillbehör vill du ha?</legend>
            <input type="checkbox" id="ice" name="extra" value="ice">
            <label for="ice">Is</label><br>
            
            <input type="checkbox" id="lemon" name="extra" value="lemon">
            <label for="lemon">Citronskiva</label>
        </fieldset>
    </div>

    <h3>Brytare (Toggles) och "Tryckt"-status</h3>
    <p>
        Ibland vill vi ha en knapp som fungerar som en strömbrytare (PÅ/AV). Här använder vi <code>aria-pressed</code> för att skärmläsaren ska säga "nedtryckt" eller "ej nedtryckt".
    </p>

    <div class="example-box">
        <button type="button" aria-pressed="true" onclick="this.setAttribute('aria-pressed', this.getAttribute('aria-pressed') === 'true' ? 'false' : 'true')">
            Mörkt läge
        </button>
    </div>

    <div class="tip-box">
        <p>
            <strong>Skärmläsar-tips:</strong> När en knapp har <code>aria-pressed="true"</code>, säger min skärmläsare ofta "Nedtryckt". Detta är perfekt för inställningar som ska vara bestående, till exempel att slå på eller av ett filter.
        </p>
    </div>
</section>

<section id="menus-chapter">
    <h2>8. Menyer och Dropdowns</h2>
    <p class="explanation">
        Det finns två huvudtyper av listor med val på webben. Att välja rätt typ är avgörande för att jag som använder skärmläsare ska förstå hur jag förväntas interagera med dem.
    </p>

    <hr>

    <h3>Typ A: Navigeringsmenyer (Utfällbara)</h3>
    <p>
        Dessa används när du vill visa en lista med länkar eller funktioner. Här måste vi kommunicera tillståndet manuellt eftersom vi ofta använder knappar för att styra listor.
    </p>

    <div class="example-box">
        <button 
            type="button" 
            id="menu-btn" 
            aria-haspopup="true" 
            aria-expanded="false" 
            aria-controls="dropdown-list"
        >
            Inställningar
        </button>

        <ul id="dropdown-list" style="display: none; list-style: none; padding: 10px; border: 1px solid #ccc;">
            <li><a href="#">Min profil</a></li>
            <li><a href="#">Säkerhetsinställningar</a></li>
            <li><a href="#">Logga ut</a></li>
        </ul>
    </div>

    <p class="explanation">
        <strong>Viktiga attribut för Navigeringsmenyer:</strong><br>
        * <code>aria-haspopup="true"</code>: Förvarnar om att knappen öppnar något extra.<br>
        * <code>aria-expanded</code>: Ändras mellan <em>true</em> och <em>false</em> via JavaScript så att jag hör "Öppen" eller "Stängd".<br>
        * <code>aria-controls</code>: Kopplar ihop knappen med listans unika ID.
    </p>

    

    <hr>

    <h3>Typ B: Rullgardiner (Standard Select-menyer)</h3>
    <p>
        Används när användaren ska välja ett alternativ i ett formulär (t.ex. vid en beställning). Här sköter webbläsaren all tillgänglighet automatiskt.
    </p>

    <div class="example-box">
        <label for="drink-select">Vad vill du dricka till maten?</label>
        <br>
        <select id="drink-select">
            <option value="water">Källvatten</option>
            <option value="juice">Äppeljuice</option>
            <option value="cider">Alkoholfri cider</option>
        </select>
    </div>

    <div class="tip-box">
        <p>
            <strong>Varför Select är bra:</strong> Som skärmläsaranvändare hör jag direkt min position, t.ex. "Äppeljuice, 2 av 3". Jag kan också snabbsöka genom att trycka på första bokstaven i alternativet jag letar efter.
        </p>
    </div>

    

    <h3>Sammanfattning: Vad ska jag välja?</h3>
    <ul>
        <li><strong>Välj Navigeringsmeny (Typ A):</strong> Om användaren ska <em>navigera</em> till en ny sida eller fälla ut en verktygsmeny.</li>
        <li><strong>Välj Rullgardin (Typ B):</strong> Om användaren ska <em>välja ett värde</em> som ska skickas in i ett formulär.</li>
    </ul>
</section>

<section id="keyboard-chapter">
    <h2>9. Tangentbordsnavigering: Grunden i allt</h2>
    <p class="explanation">
        Om en sida inte går att använda utan mus, är den i praktiken trasig. För oss som använder skärmläsare eller motoriska hjälpmedel är tangentbordet vår enda väg genom webben.
    </p>

    <div class="example-box">
        <h3>1. Fokusmarkeringen (Outline)</h3>
        <p>Utan en visuell markör vet en tangentbordsanvändare inte var de befinner sig. Det är som att skriva med en osynlig markör.</p>
        <pre><code>
/* Skapa en högkontrast-ram som syns på alla bakgrunder */
:focus {
    outline: 3px solid #FFD700;
    outline-offset: 4px;
}
        </code></pre>
    </div>

    <div class="example-box">
        <h3>2. Skip links: Snabbfilen till innehållet</h3>
        <p>
            Tänk dig att tabba genom 50 menyalternativ på varje ny sida. En "Skip link" är en dold länk som ligger <strong>allra först i din HTML</strong>. Den blir synlig först när man trycker på Tabb.
        </p>
        <pre><code>
/* HTML: Läggs direkt efter body-taggen */
&lt;a href="#main-content" class="skip-link"&gt;Hoppa till innehåll&lt;/a&gt;

/* CSS: Göm länken tills den får fokus */
.skip-link {
    position: absolute;
    top: -100px;
    left: 0;
}
.skip-link:focus {
    top: 0;
    background: #000;
    color: #fff;
    padding: 10px;
}
        </code></pre>
    </div>

    <div class="example-box">
        <h3>3. Logisk Tabb-ordning & Tabindex</h3>
        <p>
            Webbläsaren följer din HTML-struktur. Om du flyttar element visuellt med CSS, kommer tabben fortfarande följa koden. 
        </p>
        <ul>
            <li><strong>tabindex="0"</strong>: Gör ett element tabbbart i sin naturliga ordning.</li>
            <li><strong>tabindex="-1"</strong>: Tar bort elementet från tabb-ordningen.</li>
            <li><strong>Varning:</strong> Använd aldrig <code>tabindex="1"</code> eller högre. Det skapar en ologisk ordning som förvirrar användaren.</li>
        </ul>
    </div>

<div class="example-box">
    <h3>4. Interaktiv meny: Setup & Fullständig interaktion</h3>
    <p>För att en meny ska kännas "äkta" måste den svara på mer än bara klick. Den behöver stödja piltangenter, Escape och val via tangentbordet (Enter/Mellanslag).</p>

    <h4>HTML: Kopplingen mellan knapp och lista</h4>
    <p>Vi använder <code>aria-controls</code> för att peka på listans <code>id</code>, och <code>aria-expanded</code> för att berätta om menyn är öppen.</p>
    
    <pre><code>
&lt;button type="button" id="demo-menu-btn" aria-haspopup="true" aria-expanded="false" aria-controls="demo-menu-list"&gt;
    Inställningar
&lt;/button&gt;
    </code></pre>

    <h4>Interaktivt Demo</h4>
    <div style="margin: 20px 0; padding: 20px; background: #eee; border-radius: 8px; border: 1px solid #ccc;">
        <button type="button" id="demo-menu-btn" aria-haspopup="true" aria-expanded="false" aria-controls="demo-menu-list">
            Inställningar (Tryck Enter/Space)
        </button>
        
        <ul id="demo-menu-list" style="display: none; list-style: none; padding: 10px; border: 2px solid #333; width: 220px; background: white; margin-top: 10px;">
            <li><a href="#" class="menu-item" style="display: block; padding: 8px; text-decoration: none; color: black; border-bottom: 1px solid #eee;">Profil</a></li>
            <li><a href="#" class="menu-item" style="display: block; padding: 8px; text-decoration: none; color: black; border-bottom: 1px solid #eee;">Säkerhet</a></li>
            <li><a href="#" class="menu-item" style="display: block; padding: 8px; text-decoration: none; color: black;">Logga ut</a></li>
        </ul>
    </div>

    <h4>JavaScript: Logiken för pilar, val och Escape</h4>
    <pre><code>
menuList.addEventListener('keydown', (e) => {
    const items = Array.from(menuItems);
    const index = items.indexOf(document.activeElement);

    switch (e.key) {
        case 'ArrowDown':
            e.preventDefault();
            items[(index + 1) % items.length].focus();
            break;
        case 'ArrowUp':
            e.preventDefault();
            items[(index - 1 + items.length) % items.length].focus();
            break;
        case 'Enter':
        case ' ':
            e.preventDefault();
            document.activeElement.click();
            break;
        case 'Escape':
            toggleMenu(false);
            menuBtn.focus(); // Skicka tillbaka fokus!
            break;
    }
});
    </code></pre>
</div>

<div class="tip-box">
    <p>
        <strong>Vikten av Escape och Fokus-retur:</strong> När du stänger en meny med Escape-tangenten är det kritiskt att du flyttar tillbaka fokus till knappen som öppnade den. Om fokus bara "försvinner" hamnar jag som använder skärmläsare oftast längst upp på sidan igen, vilket är extremt frustrerande. Genom att köra <code>menuBtn.focus()</code> i din Escape-logik håller du användaren på rätt plats.
    </p>
</div>
</section>

<section id="react-chapter">
    <h2>10. HTML vs React: Att behålla kontrollen i ramverk</h2>
    <p class="explanation">
        När vi går från statisk HTML till React ändras spelreglerna. React är fantastiskt, men det kan lätt "pajja" tillgängligheten om vi inte tänker på hur DOM-trädet uppdateras.
    </p>

    <div class="example-box">
        <h3>1. JSX och ARIA-attribut</h3>
        <p>
            I React skapar vi komponenter som fungerar som byggblock. En vanlig fälla är att man skapar en "snygg" knapp-komponent men glömmer att skicka med de tekniska instruktionerna (ARIA-attributen) hela vägen ner till det faktiska HTML-elementet.
        </p>

        <h4>Vad koden innebär:</h4>
        <p>
            I exemplet använder vi <strong>Destructuring</strong> (<code>{ label, ...rest }</code>) och <strong>Spread attributes</strong> (<code>{...rest}</code>).
        </p>
        <ul>
            <li><strong>label</strong>: Vi bryter ut den specifika text som skärmläsaren ska läsa upp.</li>
            <li><strong>...rest</strong>: Detta fungerar som en "slasktratt" som samlar ihop alla andra instruktioner du skickar (som <code>onClick</code> eller <code>id</code>) och ser till att de landar på den riktiga HTML-taggen.</li>
        </ul>

        <pre><code>
const Button = ({ label, ...rest }) => (
  &lt;button aria-label={label} {...rest}&gt;
    &lt;span className="icon-menu"&gt;&lt;/span&gt;
  &lt;/button&gt;
);

// Användning:
&lt;Button label="Öppna huvudmeny" onClick={toggle} /&gt;
        </code></pre>

        <h4>Vad händer i praktiken?</h4>
        <p>
            Om du inte använde <code>...rest</code> skulle till exempel en <code>onClick</code>-händelse som du lägger på din komponent aldrig nå fram till knappen. För oss som använder skärmläsare innebär det att knappen kan bli helt "tyst" eller omöjlig att aktivera, eftersom den tekniska kopplingen bryts i React-lagret.
        </p>
    </div>

    <div class="example-box">
        <h3>2. Fragment istället för Div-soppa</h3>
        <p>
            I React måste en komponent alltid returnera ett omslutande element. Förr löste man detta genom att packa in allt i en <code>&lt;div&gt;</code>. Problemet är att den där lilla diven följer med ut i den färdiga webbsidan, och där kan den ställa till det rejält.
        </p>

        <h4>Varför är detta ett problem?</h4>
        <p>
            Vissa HTML-element, som tabeller (<code>&lt;tr&gt;</code>) och listor (<code>&lt;li&gt;</code>), har en strikt hierarki. Om du trycker in en extra <code>&lt;div&gt;</code> mellan en rad och en cell så bryts relationen.
        </p>
        <blockquote>
            <strong>För skärmläsaren:</strong> Det upplevs som att tabellen eller listan är trasig. Man kan inte längre navigera logiskt mellan cellerna eftersom "länken" mellan dem har brutits av div-elementet.
        </blockquote>

        <h4>Korrekt kod med Fragment:</h4>
        <pre><code>
// RÄTT VÄG: Skapar inga extra element i DOM:en
const TableCells = () => (
  &lt;&gt;
    &lt;td&gt;Namn&lt;/td&gt;
    &lt;td&gt;Status&lt;/td&gt;
  &lt;/&gt;
);
        </code></pre>

        <p>
            Genom att använda <code>&lt;&gt;</code> (kortform för Fragment) håller du React glad utan att skräpa ner den HTML-kod som skärmläsaren ska tolka.
        </p>
    </div>

    <div class="example-box">
        <h3>3. Route Announcing: Tala om när sidan byts</h3>
        <p>
            I en vanlig webbplats laddas hela sidan om när du klickar på en länk. Din skärmläsare märker det direkt, tystnar, och börjar sedan läsa upp den nya sidans titel. I React (som är en Single Page Application) byts bara innehållet ut på skärmen medan själva webbläsaren "står stilla".
        </p>

        <h4>Problemet: Den stora tystnaden</h4>
        <p>
            Eftersom webbläsaren inte laddas om, får skärmläsaren ingen signal om att något har hänt. Fokus stannar kvar på länken du just tryckte på, och du får ingen bekräftelse på att du faktiskt har landat på en ny sida.
        </p>

        <h4>Lösningen: En "Announcer"</h4>
        <p>
            Vi använder <code>aria-live="polite"</code>. Det är en instruktion till skärmläsaren att bevaka elementet och läsa upp allt som ändras inuti det, även om användaren inte har fokus där just nu.
        </p>

        <h4>Var placeras den i koden?</h4>
        <p>
            Den bör ligga som ett syskon till din huvudsakliga <code>&lt;main&gt;</code>-tagg eller precis innan dina Routes. Genom att ha den "globalt" i <code>App.tsx</code> ligger den alltid kvar i bakgrunden och väntar på att få ropa ut nästa sidtitel.
        </p>

        <pre><code>
/* Exempel på placering i App.tsx */
function App() {
  return (
    &lt;Router&gt;
      &lt;Navbar /&gt; {/* Menyn ligger kvar längst upp */}
      
      &lt;!-- Route Announcer: Global och alltid närvarande --&gt;
      &lt;div aria-live="polite" aria-atomic="true" class="sr-only"&gt;
        {`Sidan ${currentPageTitle} har laddats.`}
      &lt;/div&gt;

      &lt;!-- Main-taggen markerar var det unika innehållet börjar --&gt;
      &lt;main id="main-content"&gt;
        &lt;Routes&gt;
          &lt;Route path="/" element={&lt;Home /&gt;} /&gt;
          &lt;Route path="/om" element={&lt;About /&gt;} /&gt;
          &lt;Route path="/kontakt" element={&lt;Contact /&gt;} /&gt;
        &lt;/Routes&gt;
      &lt;/main&gt;
    &lt;/Router&gt;
  );
}
        </code></pre>

        

        <p>
            Genom att använda <code>aria-atomic="true"</code> tvingar vi skärmläsaren att läsa upp hela meningen varje gång, även om bara sidnamnet ändras. Det gör att jag som användare aldrig behöver tveka på var jag har hamnat.
        </p>
    </div>

    <div class="example-box">
        <h3>4. Focus Management vid sidbyte</h3>
        <p>
            När du byter sida i React flyttas inte fokus automatiskt till toppen. Vi använder <code>useEffect</code> för att flytta fokus till den nya sidans huvudrubrik (<code>&lt;h1&gt;</code>) så fort sidan visas. För att en rubrik ska kunna ta emot fokus måste den ha attributet <code>tabindex="-1"</code>.
        </p>
        <pre><code>
useEffect(() => {
  headingRef.current.focus();
}, []);
        </code></pre>
        <h4>Varför gör vi så här?</h4>
        <p>
            Genom att flytta fokus till rubriken bekräftar vi för skärmläsaren att användaren har landat rätt. Skärmläsaren börjar då läsa upp rubriken direkt.
        </p>
    </div>

    <div class="example-box">
        <h3>5. Formulär: htmlFor och Unika ID:n</h3>
        <p>
            I JSX använder vi <code>htmlFor</code> istället för <code>for</code>. Den största utmaningen i React är dock hur vi hanterar ID-kopplingar när vi börjar dela upp vårt formulär i återanvändbara komponenter.
        </p>

        <h4>Fällan med återanvända komponenter</h4>
        <p>
            Om vi hårdkodar ett ID inne i en komponent som används flera gånger, får vi flera element på samma sida med samma ID.
        </p>
        <blockquote>
            <strong>För skärmläsaren:</strong> Om två fält har samma ID blir kopplingen till etiketten "trasig". Det kan innebära att när jag tabbar till ett fält för "Stad", läser rösten istället upp etiketten för "Gatuadress".
        </blockquote>

        <div class="tip-box">
            <p><strong>Ett tips på vägen:</strong> Använd en <em>Accessibility Linter</em>. Det fungerar som en digital korrekturläsare som varnar dig direkt om du råkar glömma <code>htmlFor</code> eller andra viktiga attribut.</p>
        </div>
    </div>
</section>

    </main>

<script>
    document.addEventListener('DOMContentLoaded', () => {

    /* ============================================================
       KAPITEL 8: MENYER OCH DROPDOWNS (Logik för huvudmenyn)
       Hanterar öppna/stäng och grundläggande ARIA-status.
       ============================================================ */
    const navBtn = document.getElementById('main-nav-btn'); // Justera ID efter din kod
    const navList = document.getElementById('main-nav-list');

    if (navBtn && navList) {
        navBtn.addEventListener('click', () => {
            const isExpanded = navBtn.getAttribute('aria-expanded') === 'true';
            navBtn.setAttribute('aria-expanded', !isExpanded);
            navList.style.display = isExpanded ? 'none' : 'block';
        });
    }


    /* ============================================================
       KAPITEL 9: TANGENTBORDSNAVIGERING (Logik för interaktiv demo)
       Inkluderar pil-navigering, Enter/Space-val och Fokus-retur.
       ============================================================ */
    const demoBtn = document.getElementById('demo-menu-btn');
    const demoList = document.getElementById('demo-menu-list');
    const demoItems = demoList ? demoList.querySelectorAll('.menu-item') : [];

    if (demoBtn && demoList) {
        // Funktion för att hantera öppning/stängning i demot
        function toggleDemoMenu(state) {
            demoBtn.setAttribute('aria-expanded', state);
            demoList.style.display = state ? 'block' : 'none';
            if (state && demoItems.length > 0) {
                demoItems[0].focus(); // Flytta fokus till första alternativet
            }
        }

        // Öppna/stäng vid klick på knappen
        demoBtn.addEventListener('click', () => {
            const isOpen = demoBtn.getAttribute('aria-expanded') === 'true';
            toggleDemoMenu(!isOpen);
        });

        // Avancerad tangentbordslyssnare för pil-navigering
        demoList.addEventListener('keydown', (e) => {
            const items = Array.from(demoItems);
            const currentIndex = items.indexOf(document.activeElement);

            switch (e.key) {
                case 'ArrowDown':
                    e.preventDefault(); // Stoppa sidscrolling
                    items[(currentIndex + 1) % items.length].focus();
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    items[(currentIndex - 1 + items.length) % items.length].focus();
                    break;
                case 'Enter':
                case ' ': // Mellanslag
                    e.preventDefault();
                    document.activeElement.click(); // Aktivera länken/alternativet
                    break;
                case 'Escape':
                    toggleDemoMenu(false);
                    demoBtn.focus(); // KRITISKT: Fokus tillbaka till knappen
                    break;
            }
        });
    }
});

/* ============================================================
   KAPITEL 10: HTML VS REACT (Simulering av React-fokus)
   ============================================================ */
// Här simulerar vi hur React hanterar att "tappa" fokus vid rendering
const reactSimBtn = document.getElementById('react-sim-btn');

if (reactSimBtn) {
    reactSimBtn.addEventListener('click', () => {
        console.log("Simulerar React-rendering: Flyttar fokus till rubrik...");
        // I React skulle detta ske i en useEffect vid sidbyte
        const newHeading = document.querySelector('#keyboard-chapter h2');
        if (newHeading) {
            newHeading.setAttribute('tabindex', '-1');
            newHeading.focus();
        }
    });
}
</script>

</body>
</html>